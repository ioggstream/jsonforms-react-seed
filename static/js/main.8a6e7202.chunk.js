(this["webpackJsonpjsonforms-react-seed"]=this["webpackJsonpjsonforms-react-seed"]||[]).push([[0],{548:function(e,t,n){e.exports=n(987)},554:function(e,t,n){},715:function(e,t){},723:function(e,t){},725:function(e,t){},802:function(e,t,n){},982:function(e,t){},987:function(e,t,n){"use strict";n.r(t);var a=n(63),o=n.n(a),r=n(531),s=n(0),c=n.n(s),i=n(15),l=n.n(i),d=(n(554),n(328)),m=n(14),u=n(324),h=n(1009),g=n(535),p=n.n(g),f=n(534),v=n.n(f),E=(n(802),n(227)),w=n(533),b=n.n(w);const j=n(805),O=n(826),y=n(827),k=v()({container:{padding:"1em"},title:{textAlign:"center",padding:"0.25em"},dataContent:{display:"flex",justifyContent:"center",borderRadius:"0.25em",backgroundColor:"#cecece"},demoform:{margin:"auto",padding:"1rem"},textField:{marginLeft:"5em"}}),C={},x=e=>e?JSON.stringify(Object(E.get)(e.getState(),["jsonforms","core","data"]),null,2):"";function A(e){j.toCanvas(document.getElementById("qrcode"),x(e)),console.log("store.errors",(e=>e?JSON.stringify(Object(E.get)(e.getState(),["jsonforms","core","errors"]),null,2):"")(e))}const R=e=>{const t=e.target.files;console.log(t),((e,t)=>{if(e.type&&-1===e.type.indexOf("image"))return void console.log("File is not an image.",e.type,e);const n=new FileReader;n.addEventListener("load",e=>{e.target&&(t.src=e.target.result)}),n.readAsDataURL(e)})(t[0],document.getElementById("attachment-1"))};var S=p()(k)(({store:e,classes:t})=>{const n=Object(s.useState)(""),a=Object(d.a)(n,2),o=(a[0],a[1]),r=Object(s.useState)(C),i=Object(d.a)(r,2),l=i[0];i[1];return Object(s.useEffect)(()=>{const t=()=>{const t=x(e);o(t)};e.subscribe(t),t()},[e]),Object(s.useEffect)(()=>{o(JSON.stringify(l,null,2))},[l]),Object(s.useEffect)(()=>{A(e)}),c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",{className:"App-title"},"Compila un form, allega i documenti e scarica il pdf"),c.a.createElement("p",{className:"App-intro"},"Reference an URI with schema.yaml and uischema.yaml to rock."),c.a.createElement("input",{type:"button",value:"Download PDF.",onClick:()=>{!function(e){console.log("document",e);var t=e.offsetWidth,n=e.offsetHeight,a=t+30,o=1.5*a+30,r=t,s=n,c=Math.ceil(n/o)-1;y(e,{allowTaint:!0}).then((function(e){e.getContext("2d"),console.log(e.height+"  "+e.width);var t=e.toDataURL("image/png",1),n=new O("p","pt",[a,o]);n.addImage(t,"png",15,15,r,s);for(var i=1;i<=c;i++)n.addPage(a,o),n.addImage(t,"png",15,-o*i+60,r,s);n.save("tmp-jsonforms.pdf")}))}(document.getElementById("rootform"))}}),c.a.createElement("input",{type:"file",id:"file-selector",multiple:!0,accept:".jpg, .jpeg, .png",onChange:R,height:"50px"}))),c.a.createElement("form",{action:"",method:"POST",id:"rootform"},c.a.createElement(h.a,{container:!0,justify:"center",spacing:1,className:t.container},c.a.createElement(h.a,{item:!0,sm:6},c.a.createElement("div",{className:t.demoform,id:"form"},e?c.a.createElement(u.Provider,{store:e},c.a.createElement(m.JsonFormsReduxContext,null,c.a.createElement(m.JsonFormsDispatch,null))):null,c.a.createElement(b.a,{canvasProps:{width:500,height:200,className:"sigCanvas",style:{borderBlockStyle:"solid"}}}),c.a.createElement("div",{className:t.container},c.a.createElement("canvas",{id:"qrcode",style:{alignItems:"center"}}),c.a.createElement("div",{id:"attachments"},c.a.createElement("img",{id:"attachment-1"}))))))))});const N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var P=n(92),I=n(13),J=n(327);class L extends s.Component{constructor(e){super(e),this.state={rating:e.value,hoverAt:null}}handleMouseOver(e){this.setState({hoverAt:e+1})}handleMouseOut(){this.setState({hoverAt:null})}handleClick(e){this.setState({rating:e+1})}render(){const e=this.props.onClick;return s.createElement("div",{id:"#/properties/rating"},s.createElement("p",null,"Rating:"),[0,1,2,3,4].map(t=>{const n=null!=this.state.hoverAt?this.state.hoverAt:this.state.rating;return s.createElement("span",{onMouseOver:()=>this.handleMouseOver(t),onMouseOut:()=>this.handleMouseOut(),onClick:()=>{this.handleClick(t),e({value:t+1})},key:"".concat(this.props.id,"_").concat(t)},t<n?"\u2605":"\u2606")}))}}L.getDerivedStateFromProps=(e,t)=>t.rating!==e.value?{rating:e.value,hoverAt:t.hoverAt}:null;var M=Object(m.withJsonFormsControlProps)(({data:e,handleChange:t,path:n})=>s.createElement(L,{value:e,onClick:e=>t(n,Number(e.value))})),W=Object(I.rankWith)(3,Object(I.scopeEndsWith)("rating")),B=n(539),D=n.n(B);class U extends s.Component{render(){return s.createElement("div",null,s.createElement(D.a,{source:this.props.uischema.text}))}}var T=Object(m.withJsonFormsControlProps)(({data:e,path:t,uischema:n})=>s.createElement(U,{data:e,path:t,uischema:n})),q=Object(I.rankWith)(3,Object(I.uiTypeIs)("Markdown")),_=n(540);const z=n(293),H=n(971),$={richiedente:{given_name:"Roberto",family_name:"Polli"},dichiarazione:{}},G={jsonforms:{cells:J.materialCells,renderers:J.materialRenderers}},K=Object(P.combineReducers)({jsonforms:Object(I.jsonformsReducer)()}),Q=Object(P.createStore)(K,G,Object(_.devToolsEnhancer)({})),V=new URLSearchParams(window.location.search).get("q")||"form-1",X=V+"/schema.yaml",Y=V+"/uischema.yaml",Z=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.text();case 4:return n=e.sent,a=z.safeLoad(n),console.debug(t,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Z(X).then(e=>{H.dereference(e,(e,t)=>{if(e)throw console.error(e),e;console.log(t),Z(Y).then(e=>{Q.dispatch(I.Actions.init($,t,e))})})}),Q.dispatch(I.Actions.registerRenderer(W,M)),Q.dispatch(I.Actions.registerRenderer(q,T)),l.a.render(c.a.createElement(S,{store:Q}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");N?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):F(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):F(e)})}}()}},[[548,1,2]]]);
//# sourceMappingURL=main.8a6e7202.chunk.js.map