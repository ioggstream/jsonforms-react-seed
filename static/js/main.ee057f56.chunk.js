(this["webpackJsonpjsonforms-react-seed"]=this["webpackJsonpjsonforms-react-seed"]||[]).push([[0],{548:function(e,t,n){e.exports=n(987)},554:function(e,t,n){},715:function(e,t){},723:function(e,t){},725:function(e,t){},802:function(e,t,n){},982:function(e,t){},987:function(e,t,n){"use strict";n.r(t);var a=n(63),r=n.n(a),o=n(531),s=n(0),c=n.n(s),i=n(15),l=n.n(i),d=(n(554),n(328)),m=n(14),u=n(324),h=n(1009),f=n(535),g=n.n(f),p=n(534),v=n.n(p),E=(n(802),n(227)),b=n(533),w=n.n(b);const j=n(805),O=n(826),y=n(827),C=v()({container:{padding:"1em"},title:{textAlign:"center",padding:"0.25em"},dataContent:{display:"flex",justifyContent:"center",borderRadius:"0.25em",backgroundColor:"#cecece"},demoform:{margin:"auto",padding:"1rem"},textField:{marginLeft:"5em"}}),k={},x=e=>e?JSON.stringify(Object(E.get)(e.getState(),["jsonforms","core","data"]),null,2):"";function A(e){j.toCanvas(document.getElementById("qrcode"),x(e)),console.log("store.errors",(e=>e?JSON.stringify(Object(E.get)(e.getState(),["jsonforms","core","errors"]),null,2):"")(e))}const S=e=>{const t=e.target.files;console.log(t),((e,t)=>{if(e.type&&-1===e.type.indexOf("image"))return void console.log("File is not an image.",e.type,e);const n=new FileReader;n.addEventListener("load",e=>{e.target&&(t.src=e.target.result)}),n.readAsDataURL(e)})(t[0],document.getElementById("attachment-1"))};var N=g()(C)(({store:e,classes:t})=>{const n=Object(s.useState)(""),a=Object(d.a)(n,2),r=a[0],o=a[1],i=Object(s.useState)(k),l=Object(d.a)(i,2),f=l[0],g=l[1];return console.log(r),console.log(g),Object(s.useEffect)(()=>{const t=()=>{const t=x(e);o(t)};e.subscribe(t),t()},[e]),Object(s.useEffect)(()=>{o(JSON.stringify(f,null,2))},[f]),Object(s.useEffect)(()=>{A(e)}),c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",{className:"App-title"},"Compila un form, allega i documenti e scarica il pdf"),c.a.createElement("a",{href:"?q=form-1/"},"Anagrafe del comune di Bugliano"),c.a.createElement("br",null),c.a.createElement("a",{href:"?q=form-2/"},"Istituto Comprensivo Franti"),c.a.createElement("br",null),c.a.createElement("a",{href:"?q=form-3/"},"Ufficio elettorale comune di Bugliano"),c.a.createElement("br",null),c.a.createElement("input",{type:"button",value:"Download PDF.",onClick:()=>{!function(e){console.log("document",e);var t=e.offsetWidth,n=e.offsetHeight,a=t+30,r=1.5*a+30,o=t,s=n,c=Math.ceil(n/r)-1;y(e,{allowTaint:!0}).then((function(e){e.getContext("2d"),console.log(e.height+"  "+e.width);var t=e.toDataURL("image/png",1),n=new O("p","pt",[a,r]);n.addImage(t,"png",15,15,o,s);for(var i=1;i<=c;i++)n.addPage(a,r),n.addImage(t,"png",15,-r*i+60,o,s);n.save("tmp-jsonforms.pdf")}))}(document.getElementById("rootform"))}}))),c.a.createElement("form",{action:"",method:"POST",id:"rootform"},c.a.createElement(h.a,{container:!0,justify:"center",spacing:1,className:t.container},c.a.createElement(h.a,{item:!0,sm:6},c.a.createElement("div",{className:t.demoform,id:"form"},e?c.a.createElement(u.Provider,{store:e},c.a.createElement(m.JsonFormsReduxContext,null,c.a.createElement(m.JsonFormsDispatch,null))):null,c.a.createElement(w.a,{canvasProps:{width:500,height:200,className:"sigCanvas",style:{borderBlockStyle:"solid"}}}),c.a.createElement("div",{className:t.container},c.a.createElement("canvas",{id:"qrcode",style:{alignItems:"center"}}))))),c.a.createElement("div",{id:"attachments"},c.a.createElement("img",{alt:"Attachment 1",id:"attachment-1"}))),"Allega un file usando il bottone qui sotto.",c.a.createElement("input",{type:"file",id:"file-selector",multiple:!0,accept:".jpg, .jpeg, .png",onChange:S,height:"50px"}))});const R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}var I=n(92),J=n(13),P=n(327);class B extends s.Component{constructor(e){super(e),this.state={rating:e.value,hoverAt:null}}handleMouseOver(e){this.setState({hoverAt:e+1})}handleMouseOut(){this.setState({hoverAt:null})}handleClick(e){this.setState({rating:e+1})}render(){const e=this.props.onClick;return s.createElement("div",{id:"#/properties/rating"},s.createElement("p",null,"Rating:"),[0,1,2,3,4].map(t=>{const n=null!=this.state.hoverAt?this.state.hoverAt:this.state.rating;return s.createElement("span",{onMouseOver:()=>this.handleMouseOver(t),onMouseOut:()=>this.handleMouseOut(),onClick:()=>{this.handleClick(t),e({value:t+1})},key:"".concat(this.props.id,"_").concat(t)},t<n?"\u2605":"\u2606")}))}}B.getDerivedStateFromProps=(e,t)=>t.rating!==e.value?{rating:e.value,hoverAt:t.hoverAt}:null;var L=Object(m.withJsonFormsControlProps)(({data:e,handleChange:t,path:n})=>s.createElement(B,{value:e,onClick:e=>t(n,Number(e.value))})),M=Object(J.rankWith)(3,Object(J.scopeEndsWith)("rating")),W=n(539),q=n.n(W);class D extends s.Component{render(){return s.createElement("div",null,s.createElement(q.a,{source:this.props.uischema.text}))}}var U=Object(m.withJsonFormsControlProps)(({data:e,path:t,uischema:n})=>s.createElement(D,{data:e,path:t,uischema:n})),T=Object(J.rankWith)(3,Object(J.uiTypeIs)("Markdown")),_=n(540);const H=n(293),$=n(971),z={jsonforms:{cells:P.materialCells,renderers:P.materialRenderers}},G=Object(I.combineReducers)({jsonforms:Object(J.jsonformsReducer)()}),K=Object(I.createStore)(G,z,Object(_.devToolsEnhancer)({})),Q=new URLSearchParams(window.location.search).get("q")||"form-3",V=Q+"/schema.yaml",X=Q+"/uischema.yaml",Y=function(){var e=Object(o.a)(r.a.mark((function e(t,n=!1){var a,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.text();case 4:if(a=e.sent,o=H.safeLoad(a),console.debug(t,o),n){e.next=9;break}return e.abrupt("return",o);case 9:return e.prev=9,e.next=12,$.dereference(o);case 12:return s=e.sent,e.abrupt("return",s);case 16:throw e.prev=16,e.t0=e.catch(9),console.error("Cannot dereference",e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();Y(V).then(e=>{$.dereference(e,(e,t)=>{if(e)throw console.error(e),e;console.log(t),Y(X,!0).then(e=>{var n;const a=(null===(n=e._meta)||void 0===n?void 0:n.data)||{};K.dispatch(J.Actions.init(a,t,e))})})}),K.dispatch(J.Actions.registerRenderer(M,L)),K.dispatch(J.Actions.registerRenderer(T,U)),l.a.render(c.a.createElement(N,{store:K}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");R?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):F(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):F(e)})}}()}},[[548,1,2]]]);
//# sourceMappingURL=main.ee057f56.chunk.js.map